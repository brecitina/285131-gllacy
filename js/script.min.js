function closePopup(a){popup.classList.contains("modal-content-show")&&(popup.classList.remove("modal-content-show"),popup.classList.remove("modal-error"),overlay.classList.remove("modal-overlay-show"))}function initMap(){var a=document.querySelector(".map-contacts .wrapper");a.classList.remove("default-map");var b=new ymaps.Map("map",{center:[59.939331,30.329427],zoom:16},{maxZoom:18,minZoom:11});b.behaviors.enable("scrollZoom"),b.controls.add("zoomControl",{left:"40px",top:"50px"});var c=new ymaps.Placemark([59.938631,30.323055],{hintContent:"ул. Большая Конюшенная 19/8, Санкт-Петербург"},{iconImageHref:"img/ic-ice-pin.png",iconImageSize:[218,142],iconImageOffset:[-38,-135]});b.geoObjects.add(c)}function initPage(){ymaps.ready(initMap)}var link=document.querySelector(".js-feedback"),popup=document.querySelector(".modal-content"),overlay=document.querySelector(".modal-overlay"),close=popup.querySelector(".modal-content-close"),form=popup.querySelector("form"),userName=popup.querySelector("#message-name"),userMail=popup.querySelector("#message-mail"),userMessage=popup.querySelector("#message-feedback"),storageName=localStorage.getItem("feedback-userName"),storageMail=localStorage.getItem("feedback-userMail");link.addEventListener("click",function(a){a.preventDefault(),overlay.classList.add("modal-overlay-show"),popup.classList.add("modal-content-show"),userName.focus(),storageName&&(userName.value=storageName,userMail.focus()),userMail&&(userMail.value=storageMail),storageName&&storageMail&&userMessage.focus()}),close.addEventListener("click",function(a){a.preventDefault(),closePopup()}),form.addEventListener("submit",function(a){userName.value&&userMail.value&&userMessage.value?(localStorage.setItem("feedback-userName",userName.value),localStorage.setItem("feedback-userMail",userMail.value)):(a.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(a){27===a.keyCode&&closePopup()}),overlay.addEventListener("click",function(a){closePopup()}),document.addEventListener("DOMContentLoaded",initPage);